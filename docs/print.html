<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Chestnut IoTPlatform</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Intro</a></li><li class="chapter-item expanded "><a href="architecture.html"><strong aria-hidden="true">2.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="hub.html"><strong aria-hidden="true">3.</strong> Hub</a></li><li class="chapter-item expanded "><a href="backend.html"><strong aria-hidden="true">4.</strong> Backend</a></li><li class="chapter-item expanded "><a href="backoffice.html"><strong aria-hidden="true">5.</strong> Backoffice</a></li><li class="chapter-item expanded "><a href="mobile.html"><strong aria-hidden="true">6.</strong> Mobile application</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Chestnut IoTPlatform</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p><img src="./images/chestnut-logo.png" alt="Chestnut logo" /></p>
<h1 id="intro"><a class="header" href="#intro">Intro</a></h1>
<p>Chestnut IoT Platform is a initiative of DIGIO Soluciones Digitales S.L. with the financial support of CDTI (Centro para el Desarrollo Tecnol√≥gico Industrial).</p>
<p>Chestnut is a high-performance OpenSource platform created to implement IoT solutions horizontally.</p>
<p>Chestnut includes:</p>
<ul>
<li>Hub Services</li>
<li>Backend and Backoffices Services</li>
<li>Configuration of K8s for cloud deployment</li>
</ul>
<p>Chestnut is built on Rust, Crystal Lang and JavaScript to achieve a very versatile platform that can run on any server while achieving a high level of performance.</p>
<p><img src="./images/digio-logo.png" alt="DIGIO Logo" /></p>
<p>With the support of:
<img src="./images/cdti-logo.jpg" alt="CDTI Logo" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="architecture"><a class="header" href="#architecture">Architecture</a></h1>
<p>The platform architecture is completely modular. It uses NATS as the main communications broker both in the Hub device services and to communicate the devices with the platform and between the platform services.</p>
<p>All services are dockerized, using Podman in the Hub appliance services and Kubernetes in the cloud services.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hub"><a class="header" href="#hub">Hub</a></h1>
<p>The Hub is the main IoT piece of the platform, it is intended to run on ARM-based devices on Debian or Raspbian-based OS.</p>
<p>Podman is the service orchestrator for the device.</p>
<p>The main services of the device are:</p>
<ul>
<li>The device broker. It allows to get the boot configuration, generate a unique device identifier and interface with the platform services and internal services.</li>
<li>Script runner. It is a service that allows to receive NodeJS-based scripts and to be executed in an isolated environment. These scripts are edited and configured online from the platform backoffice.</li>
<li>NATS. It is the communication broker, it allows to communicate all the services of the device as well as the load of local historical data.</li>
<li>Redis. It is the device history storage, it is designed to add business logic that requires consulting data from previous measurements.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="backend"><a class="header" href="#backend">Backend</a></h1>
<p>Backend services are composed of different modules:</p>
<ul>
<li>
<p>The platform broker that performs the main configuration communication between the devices and the platform.</p>
</li>
<li>
<p>The data broker that stores the data measurements generated by the devices in cloud databases.</p>
</li>
<li>
<p>The alert manager that stores the events of the devices that can generate alerts, and in turn keeps an audit log.</p>
</li>
<li>
<p>API Rest backoffice. Allows to work with the platform through API and through the Chestnut backoffice frontend in ReactJS.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="backoffice"><a class="header" href="#backoffice">Backoffice</a></h1>
<p>The platform's backoffice is intended to be mainly simple and easy to use, and at the same time serve as a basis for creating new applications and features.</p>
<p>All measurement data are represented on a numerical scale.</p>
<p>The backoffice allows to manage access permissions, devices, and device configuration, allowing to insert scripts and edit them in real time on the different devices.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mobile-application"><a class="header" href="#mobile-application">Mobile application</a></h1>
<p>The linked mobile application is an easily modifiable React Native based mobile application.</p>
<p>It allows provisioning the devices as well as accessing the platform management from any iOS and Android mobile.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
